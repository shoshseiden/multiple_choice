{% extends "site_base.html" %}
{% load multiple_choice_tags %}

{% block body %}
  <h1>{{question.quiz.quiz_name}}</h1>

  {% if question %}
    {% if question.correct_answer_choice == 'a' %}
      {{question.question_number}}. {{question.question_text}}

      <form action="" method="post">
        {% csrf_token %}
        <input type="radio" name="answer" value="{{question.correct_answer|lower}}">{{question.correct_answer}}<br>
        <input type="radio" name="answer" value="{{question.incorrect_answer_1|lower}}">{{question.incorrect_answer_1}}<br>
        <input type="radio" name="answer" value="{{question.incorrect_answer_2|lower}}">{{question.incorrect_answer_2}}<br>
        <input type="radio" name="answer" value="{{question.incorrect_answer_3|lower}}">{{question.incorrect_answer_3}}
        <p><input type="submit" name="submit"></p>
      </form>
    {% elif question.correct_answer_choice == 'b' %}
      {{question.question_number}}. {{question.question_text}}

      <form action="" method="post">
        {% csrf_token %}
        <input type="radio" name="answer" value="{{question.incorrect_answer_1|lower}}">{{question.incorrect_answer_1}}<br>
        <input type="radio" name="answer" value="{{question.correct_answer|lower}}">{{question.correct_answer}}<br>
        <input type="radio" name="answer" value="{{question.incorrect_answer_2|lower}}">{{question.incorrect_answer_2}}<br>
        <input type="radio" name="answer" value="{{question.incorrect_answer_3|lower}}">{{question.incorrect_answer_3}}
        <p><input type="submit" name="submit"></p>
      </form>
    {% elif question.correct_answer_choice == 'c' %}
      {{question.question_number}}. {{question.question_text}}

      <form action="" method="post">
        {% csrf_token %}
        <input type="radio" name="answer" value="{{question.incorrect_answer_1|lower}}">{{question.incorrect_answer_1}}<br>
        <input type="radio" name="answer" value="{{question.incorrect_answer_2|lower}}">{{question.incorrect_answer_2}}<br>
        <input type="radio" name="answer" value="{{question.correct_answer|lower}}">{{question.correct_answer}}<br>
        <input type="radio" name="answer" value="{{question.incorrect_answer_3|lower}}">{{question.incorrect_answer_3}}
        <p><input type="submit" name="submit"></p>
      </form>
    {% elif question.correct_answer_choice == 'd' %}
      {{question.question_number}}. {{question.question_text}}

      <form action="" method="post">
        {% csrf_token %}
        <input type="radio" name="answer" value="{{question.incorrect_answer_1|lower}}">{{question.incorrect_answer_1}}<br>
        <input type="radio" name="answer" value="{{question.incorrect_answer_2|lower}}">{{question.incorrect_answer_2}}<br>
        <input type="radio" name="answer" value="{{question.incorrect_answer_3|lower}}">{{question.incorrect_answer_3}}<br>
        <input type="radio" name="answer" value="{{question.correct_answer|lower}}">{{question.correct_answer}}
        <p><input type="submit" name="submit"></p>
      </form>
    {% else %}
      {{question.question_number}}. {{question.question_text}}

      <p>Invalid answer. Please enter, a, b, c, or d for the correct answer choice.</p>
    {% endif %}

    <a href="{% url 'quiz' quiz.pk question.pk|add:'-1' %}">Previous Question</a>
    <a href="{% url 'quiz' quiz.pk question.pk|add:'1' %}">Next Question</a>
    <a href="{% url 'result' quiz.pk %}">Results</a>

  {% else %}
    No questions available.
  {% endif %}
{% endblock %}
